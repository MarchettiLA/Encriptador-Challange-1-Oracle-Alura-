<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encriptador Alura - Contacto</title>
    <link rel="stylesheet" href="reset.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bungee+Shade&display=swap" rel="stylesheet"> 
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Koulen&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="pushbarjs/pushbar.min.css">
    <link rel="stylesheet" href="style.css">      
</head>

<body>
    <header>
        <h1><a href="index.html"><img id="logo" src="img/freak-logo.png"></a></h1>
    
        <div id="nav-menu" data-pushbar-id="right" data-pushbar-direction="right">
            
            <div id="borde-nav">
            <img src ="img/close-icon.png" data-pushbar-close>
            </div>
        
        <nav>
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="about.html">Sobre el proyecto</a></li>
                <li><a href="contact.html">Contacto</a> </li>
            </ul>
        </nav>

        </div>
        <img data-pushbar-target="right" id="barras" src="img/barras.png">
    </header>
    <main>                
            <textarea id="textarea-principal"  placeholder="Ingrese su texto aqui"></textarea>
        
        <div id="advMinus-completa">
            <img src="img/exclamation.png" id="exclam">
            <p id="advMinus">Solo letras minúsculas y sin acentos</p>
        </div>
        
            <button id="encButton">Encriptar</button>
            <button id="dencButton">Desencriptar</button>
            
    </main>
        <section class="noResult" id="noResult">
            <h2>¡UPS!</h2>
            <h3>Ningun mensaje fue encontrado</h3>
            <p>Ingresa el texto que desees encriptar o desencriptar</p>
        </section>

        <section class="result-mobile" id="result-mobile">
            <div>
                <textarea  id="result-area-mobile"></textarea>
            </div>
             <button class="copy-button" id="copyMobile">Copiar</button>
            
        </section>

        <br id="lastJump"> 
        <a name="abajo"></a>
    <aside id="desktop-aside">
       
        
        <div id="result-desktop">
            <textarea readonly id="result-area"></textarea>
            <button class="copy-button" id="copyDesktop">Copiar</button>
        </div>

        <div class="noResult-desktop" id="noResult-desktop">
            
        <h2 class="noResult-item">¡UPS!</h2>
        <h3 class="noResult-item">No hay resultados</h3>
        <p class="noResult-item">Ingresa el texto que desees encriptar o desencriptar</p>
        </div>

    </aside>
    <footer>
        <img src="img/freak-logo.png" alt="Freak Logo">
        <h5>Freak Encrypter &#169 - 2022</h2>
    </footer>
</body>
</html>


<script src="pushbarjs/pushbar.min.js"></script>
<script>
    
    const vocales = ["a","e","i","o","u"];
    const keyWords = ["ai","enter","imes","ober","ufat"];
    
    function pasarMinus(string){
        let newStr = string.toLowerCase()
        return newStr
    }

    function encriptador(string) {
    const newArr= [];
    let newKey= "";
    let minusString = pasarMinus(string)
    for (let i=0;i<minusString.length;i++){
        if(vocales.includes(minusString[i])){
            newKey = reemplazador(minusString[i])
            newArr.push(newKey)            
        } else {
            newArr.push(minusString[i])
        }

    }
    
    return newArr.join("")
} 

// Funcion principal de desencriptado!!

function desencriptador(string){
    let minusString = pasarMinus(string)
    for (let i=0; i<keyWords.length;i++){
       minusString = minusString.replaceAll(keyWords[i],vocales[i])
    }
   return string
}
   
    
    


// Funcion asistente de encriptador()

    const reemplazador = char => {
    for (let i=0;i<vocales.length;i++){
        if (char === vocales[i]){
            return keyWords[i]
        }
    }
}


//////////////////////// FUNCIONES Y VARIABLES ONCLICK() /////////////////////////////////////////////////////////////////

// FUNCION QUE MUESTRA LOS RESULTADOS DE LA ENCRIPTACION O DESENCRIPTACION

    function showResultsDesktop(){
       if(textarea.value == ""){
           noResultDesktop.style.display = "block";
           resultDesktop.style.display = "none"
       }
       if (textarea.value !== ""){
        noResultDesktop.style.display = "none";
        resultDesktop.style.display = "block"
       }
    resultArea = document.getElementById("result-area").innerHTML= encriptador(textarea.value);
    
    textarea.focus();
    textarea.value = "";
   
    main.style.transition = "width 0.3s"
    main.style.width = "60%";
    textarea.style.height = "100%"
    
    aside.style.display = "block";
    aside.style.visibility = "visible";
    aside.style.transition = "width 0.3s"
    aside.style.width = "30%"
    
    
    resultado.style.height = `95%`

   for (let element of noResultItem){
    element.style.transition = "opacity 1.5s"
    element.style.opacity = "1"
   }
}
  
   function showResultsDesktopDenc(){
       if(textarea.value == "" ){
           noResultDesktop.style.display = "block"
           resultDesktop.style.display = "none"
           
       }
       if (textarea.value !== ""){
        noResultDesktop.style.display = "";
        resultDesktop.style.display = "block"
       }
    resultArea = document.getElementById("result-area").innerHTML= desencriptador(textarea.value);
   
    textarea.focus();
    textarea.value = ""; main.style.transition = "width 0.3s"
    
    main.style.transition = "width 0.3s"
    main.style.width = "60%";
    textarea.style.height = "100%"
    
    aside.style.display = "block";
    aside.style.visibility = "visible";
    aside.style.transition = "width 0.3s"
    aside.style.width = "30%"
    
    
    resultado.style.height = `95%`

   for (let element of noResultItem){
    element.style.transition = "opacity 1.5s"
    element.style.opacity = "1"
    } 
}
 
   // MISMA FUNCION VERSION MOBILE

   //ENCRIPTADO
   function showResultsMobile(){
       resultadoFinalMobile.style.height = "20px"
       if(textarea.value == ""){
           resultadoMobile.style.display= "none";
           noResult.style.display = "block"  ;           
       }
       if (textarea.value !== ""){
        noResult.style.display = "";
        resultadoMobile.style.display = "block";
       }
    resultAreaMobile = document.getElementById("result-area-mobile").innerHTML= encriptador(textarea.value);
    autoResizeTA();
    textarea.focus();
    textarea.value = ""
    window.scrollTo(0,(document.querySelector("body")).scrollHeight);

    
    
    }
    
    

    //DESENCRIPTADO
    function showResultsMobileDenc(){
    resultadoFinalMobile.style.height = "20px"
       if(textarea.value == ""){
           resultadoMobile.style.display= "none"
           noResult.style.display = "block"             
       }
       if (textarea.value !== ""){
        noResult.style.display = ""
        resultadoMobile.style.display = "block"
       }
    resultAreaMobile = document.getElementById("result-area-mobile").innerHTML= desencriptador(textarea.value);
    autoResizeTA();
    textarea.focus();
    textarea.value = "";
    window.scrollTo(0,(document.querySelector("body")).scrollHeight);
    }
    // COPIA EL RESULTADO DE LA ENCRIPTACION O DESENCRIPTACION

    function copiarResultado(){
        if(parseInt(completeHtml()) >= 1024){
     navigator.clipboard.writeText(resultado.value)
        } else {
            navigator.clipboard.writeText(resultadoFinalMobile.value)
        }   
    }

        
// ELEMENTOS HTML
const overlay = document.getElementsByClassName("pushbar_overlay")
const navMenu = document.getElementById("nav-menu")
const closeMenu = document.getElementById("close-menu")
const noResultItem = document.getElementsByClassName("noResult-item")
const aside = document.getElementById("desktop-aside")
const header = document.querySelector("header")
const logo = document.getElementById("logo")
const barras= document.getElementById("barras")
const main = document.querySelector("main")
const resultadoFinalMobile =  document.getElementById("result-area-mobile")
const resultadoMobile = document.getElementById("result-mobile")
const resultado = document.getElementById("result-area")
const textarea = document.getElementById("textarea-principal")
const contenido = document.getElementById("textarea-principal").innerHTML
const noResultDesktop = document.getElementById("noResult-desktop")
const resultDesktop = document.getElementById("result-desktop")
const noResult = document.getElementById("noResult")
const encButton = document.getElementById("encButton")
const dencButton = document.getElementById("dencButton")
const copyButtton= document.getElementsByClassName("copy-button")
const copyButttonDesktop= document.getElementById("copyDesktop")
const copyButttonMobile= document.getElementById("copyMobile")
const completeHtml= () => window.innerWidth



//INTERACCIONES BOTONES

//Boton encriptado
if(parseInt(completeHtml()) >= 1024){
    encButton.onclick = showResultsDesktop
} else if (parseInt(completeHtml()) < 1024 ){
    encButton.onclick = showResultsMobile
    
    
}


        



//Boton desencriptar
if(parseInt(completeHtml()) >= 1024){
    dencButton.onclick = showResultsDesktopDenc
} else if (parseInt(completeHtml()) < 1024 ){
    dencButton.onclick = showResultsMobileDenc

}



//Boton Copiado

copyButttonDesktop.onclick = copiarResultado
copyButttonMobile.onclick = copiarResultado 
   

textarea.focus();
main.onload = main.style.opacity = "100%"
barras.onload = barras.style.transform = "rotate(0.5turn)"
logo.onload = logo.style.transform = "scale(1)"
header.onload = header.style.opacity = "1"





const autoResizeTA = () => {
    if (resultadoFinalMobile.clientHeight !== resultadoFinalMobile.scrollHeight){
        resultadoFinalMobile.style.height = resultadoFinalMobile.scrollHeight + "px"
    }
}


let pushbar = new Pushbar({
        blur: true,
        overlay: true
    });



</script>


